package com.example.Hafen_DB.controller;

import java.util.ArrayList;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.example.Hafen_DB.models.Normalware;

@Controller
public class NormalwareController extends DBController{
    
    ArrayList<Normalware> normalwaren;

    public NormalwareController() {
        setNormalwaren(new ArrayList<Normalware>());

        loadNormalwarenFormDB();
    }

    private void loadNormalwarenFormDB(){
        DBNormalwareController dbnc = new DBNormalwareController();
        setNormalwaren(dbnc.getAllNormalwaren());
    }

    @GetMapping("/normalwaren")
    public String normalwaren(@RequestParam(name="activePage", required = false, defaultValue = "normalwaren") String activePage, Model model) {
        loadNormalwarenFormDB();
        
        model.addAttribute("activePage", "normalwaren");
        model.addAttribute("normalwaren", getNormalwaren());
        return "index.html";
    }

    @RequestMapping("/delnormalware")
    public String delnormalware(@RequestParam(name="id", required = true, defaultValue = "null")int id, @RequestParam(name="activePage", required = false, defaultValue = "normalwaren") String activePage, Model model) {
        DBNormalwareController dbnc = new DBNormalwareController();
        dbnc.delNormalware(id);
        return "redirect:/normalwaren";        
    }

    @RequestMapping("/changenormalware")
    public String changenormalware(@RequestParam(name="id", required = true, defaultValue = "null") int id, @RequestParam(name="activePage", required = false, defaultValue = "changenormalware") String activePage, Model model){
        DBNormalwareController dbnc = new DBNormalwareController();
        model.addAttribute("normalware", dbnc.getNormalware(id));
        model.addAttribute("normalwareId", id);

        model.addAttribute("activePage", "normalwareUpdate");
        return "index.html";
    }

    @RequestMapping("/updatenormalware")
    public String updatenormalware(@RequestParam(name="normalwareId", required = true, defaultValue = "null") int normalwareId, @RequestParam(name="normalware_name", required = true, defaultValue = "null") String normalwareName, @RequestParam(name="activePage", required = false, defaultValue = "normalwaren") String activePage, Model model){
        DBNormalwareController dbnc = new DBNormalwareController();
        dbnc.updateNormalware(normalwareId, normalwareName);
        return "redirect:/normalwaren";
    }

    @RequestMapping("/addnormalware")
    public String addnormalware(@RequestParam(name="normalwareName", required = true, defaultValue = "null")String normalwareName, @RequestParam(name="activePage", required = false, defaultValue = "normalwaren") String activePage, Model model){
        DBNormalwareController dbnc = new DBNormalwareController();
        dbnc.addNewNormalware(normalwareName);
        return "redirect:/normalwaren";
    }




    public void setNormalwaren(ArrayList<Normalware> normalwaren) {
        this.normalwaren = normalwaren;
    }
    public ArrayList<Normalware> getNormalwaren() {
        return normalwaren;
    }
}
